<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Tickets - Express Bus Services</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
    <header>
        <div class="container">
            <div class="logo">Express<span>Bus</span></div>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="schedules.html">Schedules</a></li>
                    <li><a href="booking.html" class="active">Book</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section class="page-header">
            <div class="container">
                <h1>Book Your Ticket</h1>
                <p>Fast, secure, and convenient booking</p>
            </div>
        </section>

        <section class="booking-section">
            <div class="container">
                <div class="booking-steps">
                    <div class="step active">
                        <div class="step-number">1</div>
                        <div class="step-label">Route Selection</div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-label">Passenger Details</div>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-label">Seat Selection</div>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <div class="step-label">Payment</div>
                    </div>
                </div>

                <div class="booking-card">
                    <h2>Select Your Route</h2>
                    <form id="booking-route-form" class="multi-step-form">
                        <div class="form-step active" id="step1">
                            <div class="form-group">
                                <label for="booking-from"><i class="fas fa-map-marker-alt"></i> From</label>
                                <select name="booking-from" id="booking-from" required>
                                    <option value="">Select Departure</option>
                                    <option value="nairobi">Nairobi</option>
                                    <option value="mombasa">Mombasa</option>
                                    <option value="kisumu">Kisumu</option>
                                    <option value="nakuru">Nakuru</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="booking-to"><i class="fas fa-map-marker"></i> To</label>
                                <select name="booking-to" id="booking-to" required>
                                    <option value="">Select Destination</option>
                                    <option value="nairobi">Nairobi</option>
                                    <option value="mombasa">Mombasa</option>
                                    <option value="kisumu">Kisumu</option>
                                    <option value="nakuru">Nakuru</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="booking-date"><i class="far fa-calendar-alt"></i> Travel Date</label>
                                <input type="date" name="booking-date" id="booking-date" required>
                            </div>

                            <div class="form-group">
                                <label for="passengers"><i class="fas fa-users"></i> Passengers</label>
                                <select name="passengers" id="passengers" required>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                </select>
                            </div>

                            <div class="button-group">
                                <button type="button" class="btn-primary next-step">Continue to Passenger
                                    Details</button>
                            </div>
                        </div>

                        <div class="form-step" id="step2">
                            <h3>Passenger Details</h3>

                            <div class="passenger-form" id="passenger-1">
                                <h4>Passenger 1</h4>
                                <div class="form-group">
                                    <label for="fullname"><i class="fas fa-user"></i> Full Name</label>
                                    <input type="text" id="fullname" name="fullname" placeholder="Enter full name"
                                        required>
                                </div>

                                <div class="form-group">
                                    <label for="id-number"><i class="fas fa-id-card"></i> ID Number</label>
                                    <input type="text" id="id-number" name="id-number" placeholder="Enter ID number"
                                        required>
                                </div>

                                <div class="form-row">
                                    <div class="form-group half">
                                        <label for="phone"><i class="fas fa-phone"></i> Phone</label>
                                        <input type="tel" id="phone" name="phone" placeholder="Phone number">
                                    </div>
                                    <div class="form-group half">
                                        <label for="email"><i class="fas fa-envelope"></i> Email</label>
                                        <input type="email" id="email" name="email" placeholder="Email address">
                                    </div>
                                </div>
                            </div>

                            <div class="button-group">
                                <button type="button" class="btn-secondary prev-step">Back</button>
                                <button type="button" class="btn-primary next-step">Continue to Seat Selection</button>
                            </div>
                        </div>

                        <div class="form-step" id="step3">
                            <h3>Seat Selection</h3>

                            <div class="seat-selection">
                                <div class="seat-map">
                                    <div class="bus-layout">
                                        <div class="driver-seat">
                                            <i class="fas fa-user-tie"></i>
                                            <span>Driver</span>
                                        </div>

                                        <div class="seats">
                                            <div class="seat-row">
                                                <div class="seat" data-seat="1A">1A</div>
                                                <div class="seat" data-seat="1B">1B</div>
                                                <div class="aisle"></div>
                                                <div class="seat" data-seat="1C">1C</div>
                                                <div class="seat" data-seat="1D">1D</div>
                                            </div>
                                            <div class="seat-row">
                                                <div class="seat" data-seat="2A">2A</div>
                                                <div class="seat" data-seat="2B">2B</div>
                                                <div class="aisle"></div>
                                                <div class="seat" data-seat="2C">2C</div>
                                                <div class="seat" data-seat="2D">2D</div>
                                            </div>
                                            <div class="seat-row">
                                                <div class="seat" data-seat="3A">3A</div>
                                                <div class="seat" data-seat="3B">3B</div>
                                                <div class="aisle"></div>
                                                <div class="seat occupied" data-seat="3C">3C</div>
                                                <div class="seat occupied" data-seat="3D">3D</div>
                                            </div>
                                            <div class="seat-row">
                                                <div class="seat" data-seat="4A">4A</div>
                                                <div class="seat occupied" data-seat="4B">4B</div>
                                                <div class="aisle"></div>
                                                <div class="seat" data-seat="4C">4C</div>
                                                <div class="seat" data-seat="4D">4D</div>
                                            </div>
                                            <div class="seat-row">
                                                <div class="seat" data-seat="5A">5A</div>
                                                <div class="seat" data-seat="5B">5B</div>
                                                <div class="aisle"></div>
                                                <div class="seat" data-seat="5C">5C</div>
                                                <div class="seat occupied" data-seat="5D">5D</div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="seat-legend">
                                        <div class="legend-item">
                                            <div class="seat-sample"></div>
                                            <span>Available</span>
                                        </div>
                                        <div class="legend-item">
                                            <div class="seat-sample selected"></div>
                                            <span>Selected</span>
                                        </div>
                                        <div class="legend-item">
                                            <div class="seat-sample occupied"></div>
                                            <span>Occupied</span>
                                        </div>
                                    </div>

                                    <div class="selected-seats">
                                        <p>Selected Seats: <span id="selected-seats-display">None</span></p>
                                    </div>
                                </div>
                            </div>

                            <div class="button-group">
                                <button type="button" class="btn-secondary prev-step">Back</button>
                                <button type="button" class="btn-primary next-step">Continue to Payment</button>
                            </div>
                        </div>

                        <div class="form-step" id="step4">
                            <h3>Payment Information</h3>

                            <div class="booking-summary">
                                <h4>Booking Summary</h4>
                                <div class="summary-item">
                                    <div class="summary-label">Route</div>
                                    <div class="summary-value" id="summary-route">Nairobi to Mombasa</div>
                                </div>
                                <div class="summary-item">
                                    <div class="summary-label">Travel Date</div>
                                    <div class="summary-value" id="summary-date">June 15, 2024</div>
                                </div>
                                <div class="summary-item">
                                    <div class="summary-label">Passengers</div>
                                    <div class="summary-value" id="summary-passengers">1</div>
                                </div>
                                <div class="summary-item">
                                    <div class="summary-label">Seats</div>
                                    <div class="summary-value" id="summary-seats">2A</div>
                                </div>
                                <div class="summary-item total">
                                    <div class="summary-label">Total</div>
                                    <div class="summary-value" id="summary-total">KES 1,500</div>
                                </div>
                            </div>

                            <h4>Payment Method</h4>
                            <div class="payment-options">
                                <div class="payment-option">
                                    <input type="radio" id="mpesa" name="payment-method" value="mpesa" checked>
                                    <label for="mpesa">M-Pesa</label>
                                </div>
                                <div class="payment-option">
                                    <input type="radio" id="card" name="payment-method" value="card">
                                    <label for="card">Credit/Debit Card</label>
                                </div>
                            </div>

                            <div class="payment-form mpesa-form active">
                                <div class="form-group">
                                    <label for="mpesa-number"><i class="fas fa-mobile-alt"></i> M-Pesa Number</label>
                                    <input type="tel" id="mpesa-number" name="mpesa-number"
                                        placeholder="Enter M-Pesa number">
                                </div>
                            </div>

                            <div class="payment-form card-form">
                                <div class="form-group">
                                    <label for="card-number"><i class="far fa-credit-card"></i> Card Number</label>
                                    <input type="text" id="card-number" name="card-number" placeholder="Card number">
                                </div>

                                <div class="form-row">
                                    <div class="form-group half">
                                        <label for="expiry-date">Expiry Date</label>
                                        <input type="text" id="expiry-date" name="expiry-date" placeholder="MM/YY">
                                    </div>
                                    <div class="form-group half">
                                        <label for="cvv">CVV</label>
                                        <input type="text" id="cvv" name="cvv" placeholder="CVV">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="card-name">Name on Card</label>
                                    <input type="text" id="card-name" name="card-name" placeholder="Name on card">
                                </div>
                            </div>

                            <div class="button-group">
                                <button type="button" class="btn-secondary prev-step">Back</button>
                                <button type="submit" class="btn-primary" id="complete-booking">Complete Booking</button>
                            </div>
                        </div>
                    </form>

                    <!-- Receipt Section -->
                    <div id="receipt-section" style="display: none;">
                        <h3>Booking Receipt</h3>
                        <div id="receipt-content">
                            <!-- Receipt details will be dynamically inserted here -->
                        </div>
                        <button id="email-receipt" class="btn-primary">Email Receipt</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer id="contact">
        <div class="container">
            <div class="footer-content">
                <div class="logo">Express<span>Bus</span></div>
                <p>&copy; 2025 Express Bus Services. All rights reserved.</p>
            </div>
            <div class="social-icons">
                <a href="#"><i class="fab fa-facebook"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script src="booking.js"></script>
    <script>
        document.getElementById('complete-booking').addEventListener('click', function (e) {
            e.preventDefault();
            // Generate receipt details
            const receiptContent = `
                <p><strong>Route:</strong> Nairobi to Mombasa</p>
                <p><strong>Travel Date:</strong> June 15, 2024</p>
                <p><strong>Passengers:</strong> 1</p>
                <p><strong>Seats:</strong> 2A</p>
                <p><strong>Total:</strong> KES 1,500</p>
            `;
            document.getElementById('receipt-content').innerHTML = receiptContent;
            document.getElementById('receipt-section').style.display = 'block';
        });

        document.getElementById('email-receipt').addEventListener('click', function () {
            fetch('send-receipt.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    route: 'Nairobi to Mombasa',
                    travelDate: 'June 15, 2024',
                    passengers: 1,
                    seats: '2A',
                    total: 'KES 1,500'
                })
            }).then(response => response.json())
              .then(data => alert(data.message))
              .catch(error => console.error('Error:', error));
        });
    </script>
</body>

</html>